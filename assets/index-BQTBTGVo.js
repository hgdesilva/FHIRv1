var rt=Object.defineProperty;var st=(t,e,n)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>st(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function X(){}function ot(t,e){for(const n in e)t[n]=e[n];return t}function Xe(t){return t()}function Be(){return Object.create(null)}function oe(t){t.forEach(Xe)}function Ye(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function it(t){return Object.keys(t).length===0}function ut(t,e,n,l){if(t){const r=Ze(t,e,n,l);return t[0](r)}}function Ze(t,e,n,l){return t[1]&&l?ot(n.ctx.slice(),t[1](l(e))):n.ctx}function ct(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let f=0;f<o;f+=1)i[f]=e.dirty[f]|r[f];return i}return e.dirty|r}return e.dirty}function at(t,e,n,l,r,i){if(r){const o=Ze(e,n,l,i);t.p(o,r)}}function ft(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function u(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function xe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function L(t){return document.createTextNode(t)}function y(){return L(" ")}function Ae(){return L("")}function z(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function dt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pt(t){return Array.from(t.childNodes)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function V(t,e){t.value=e??""}function Ie(t,e,n){for(let l=0;l<t.options.length;l+=1){const r=t.options[l];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function mt(t){const e=t.querySelector(":checked");return e&&e.__value}function ht(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let ve;function ge(t){ve=t}function et(){if(!ve)throw new Error("Function called outside component initialization");return ve}function tt(t){et().$$.on_mount.push(t)}function Oe(){const t=et();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=ht(e,n,{cancelable:l});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}const pe=[],Me=[];let me=[];const Ue=[],_t=Promise.resolve();let je=!1;function bt(){je||(je=!0,_t.then(nt))}function Ne(t){me.push(t)}const Se=new Set;let de=0;function nt(){if(de!==0)return;const t=ve;do{try{for(;de<pe.length;){const e=pe[de];de++,ge(e),gt(e.$$)}}catch(e){throw pe.length=0,de=0,e}for(ge(null),pe.length=0,de=0;Me.length;)Me.pop()();for(let e=0;e<me.length;e+=1){const n=me[e];Se.has(n)||(Se.add(n),n())}me.length=0}while(pe.length);for(;Ue.length;)Ue.pop()();je=!1,Se.clear(),ge(t)}function gt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function vt(t){const e=[],n=[];me.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),me=e}const we=new Set;let ie;function ue(){ie={r:0,c:[],p:ie}}function ce(){ie.r||oe(ie.c),ie=ie.p}function F(t,e){t&&t.i&&(we.delete(t),t.i(e))}function G(t,e,n,l){if(t&&t.o){if(we.has(t))return;we.add(t),ie.c.push(()=>{we.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Ee(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ke(t){t&&t.c()}function he(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Ne(()=>{const i=t.$$.on_mount.map(Xe).filter(Ye);t.$$.on_destroy?t.$$.on_destroy.push(...i):oe(i),t.$$.on_mount=[]}),r.forEach(Ne)}function _e(t,e){const n=t.$$;n.fragment!==null&&(vt(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){t.$$.dirty[0]===-1&&(pe.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,l,r,i,o=null,f=[-1]){const s=ve;ge(t);const a=t.$$={fragment:null,ctx:[],props:i,update:X,not_equal:r,bound:Be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Be(),dirty:f,skip_bound:!1,root:e.target||s.$$.root};o&&o(a.root);let p=!1;if(a.ctx=n?n(t,e.props||{},(d,b,..._)=>{const N=_.length?_[0]:b;return a.ctx&&r(a.ctx[d],a.ctx[d]=N)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](N),p&&yt(t,d)),b}):[],a.update(),p=!0,oe(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const d=pt(e.target);a.fragment&&a.fragment.l(d),d.forEach(j)}else a.fragment&&a.fragment.c();e.intro&&F(t.$$.fragment),he(t,e.target,e.anchor),nt()}ge(s)}class qe{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){_e(this,1),this.$destroy=X}$on(e,n){if(!Ye(n))return X;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!it(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kt);function Re(t){let e,n;return{c(){e=m("p"),n=L(t[6]),c(e,"class","error-message svelte-1jyeb6p")},m(l,r){O(l,e,r),u(e,n)},p(l,r){r&64&&x(n,l[6])},d(l){l&&j(e)}}}function Pt(t){let e,n,l,r=t[0]?"Edit":"Add",i,o,f,s,a,p,d,b,_,N,g,v,I,E,U,Y,h,k,q,D,$,W,M,w,C,A,ee,J,S,T,H,K,te,P,B,ne=t[0]?"Update":"Add",ae,re,le,se,fe,be,Q=t[6]&&Re(t);return{c(){e=m("div"),n=m("form"),l=m("h2"),i=L(r),o=L(" Patient"),f=y(),s=m("div"),a=m("label"),a.textContent="First Name:",p=y(),d=m("input"),b=y(),_=m("div"),N=m("label"),N.textContent="Last Name:",g=y(),v=m("input"),I=y(),E=m("div"),U=m("label"),U.textContent="Gender:",Y=y(),h=m("select"),k=m("option"),k.textContent="Select gender",q=m("option"),q.textContent="Male",D=m("option"),D.textContent="Female",$=m("option"),$.textContent="Other",W=y(),M=m("div"),w=m("label"),w.textContent="Date of Birth:",C=y(),A=m("input"),ee=y(),J=m("div"),S=m("label"),S.textContent="Phone Number:",T=y(),H=m("input"),K=y(),Q&&Q.c(),te=y(),P=m("div"),B=m("button"),ae=L(ne),re=L(" Patient"),le=y(),se=m("button"),se.textContent="Cancel",c(l,"class","svelte-1jyeb6p"),c(a,"for","firstName"),c(a,"class","svelte-1jyeb6p"),c(d,"id","firstName"),c(d,"type","text"),d.required=!0,c(d,"class","svelte-1jyeb6p"),c(s,"class","form-group svelte-1jyeb6p"),c(N,"for","lastName"),c(N,"class","svelte-1jyeb6p"),c(v,"id","lastName"),c(v,"type","text"),v.required=!0,c(v,"class","svelte-1jyeb6p"),c(_,"class","form-group svelte-1jyeb6p"),c(U,"for","gender"),c(U,"class","svelte-1jyeb6p"),k.__value="",V(k,k.__value),q.__value="male",V(q,q.__value),D.__value="female",V(D,D.__value),$.__value="other",V($,$.__value),c(h,"id","gender"),h.required=!0,c(h,"class","svelte-1jyeb6p"),t[3]===void 0&&Ne(()=>t[14].call(h)),c(E,"class","form-group svelte-1jyeb6p"),c(w,"for","birthDate"),c(w,"class","svelte-1jyeb6p"),c(A,"id","birthDate"),c(A,"type","date"),A.required=!0,c(A,"class","svelte-1jyeb6p"),c(M,"class","form-group svelte-1jyeb6p"),c(S,"for","phoneNumber"),c(S,"class","svelte-1jyeb6p"),c(H,"id","phoneNumber"),c(H,"type","tel"),c(H,"placeholder","Enter numbers, spaces, hyphens (-), or parentheses ()"),c(H,"class","svelte-1jyeb6p"),c(J,"class","form-group svelte-1jyeb6p"),c(B,"type","submit"),B.disabled=t[6],c(B,"class","svelte-1jyeb6p"),c(se,"type","button"),c(se,"class","svelte-1jyeb6p"),c(P,"class","form-actions svelte-1jyeb6p"),c(n,"class","svelte-1jyeb6p"),c(e,"class","form-container svelte-1jyeb6p")},m(R,Z){O(R,e,Z),u(e,n),u(n,l),u(l,i),u(l,o),u(n,f),u(n,s),u(s,a),u(s,p),u(s,d),V(d,t[1]),u(n,b),u(n,_),u(_,N),u(_,g),u(_,v),V(v,t[2]),u(n,I),u(n,E),u(E,U),u(E,Y),u(E,h),u(h,k),u(h,q),u(h,D),u(h,$),Ie(h,t[3],!0),u(n,W),u(n,M),u(M,w),u(M,C),u(M,A),V(A,t[4]),u(n,ee),u(n,J),u(J,S),u(J,T),u(J,H),V(H,t[5]),u(J,K),Q&&Q.m(J,null),u(n,te),u(n,P),u(P,B),u(B,ae),u(B,re),u(P,le),u(P,se),fe||(be=[z(d,"input",t[12]),z(v,"input",t[13]),z(h,"change",t[14]),z(A,"input",t[15]),z(H,"input",t[16]),z(H,"input",t[7]),z(se,"click",t[9]),z(n,"submit",dt(t[8]))],fe=!0)},p(R,[Z]){Z&1&&r!==(r=R[0]?"Edit":"Add")&&x(i,r),Z&2&&d.value!==R[1]&&V(d,R[1]),Z&4&&v.value!==R[2]&&V(v,R[2]),Z&8&&Ie(h,R[3]),Z&16&&V(A,R[4]),Z&32&&V(H,R[5]),R[6]?Q?Q.p(R,Z):(Q=Re(R),Q.c(),Q.m(J,null)):Q&&(Q.d(1),Q=null),Z&1&&ne!==(ne=R[0]?"Update":"Add")&&x(ae,ne),Z&64&&(B.disabled=R[6])},i:X,o:X,d(R){R&&j(e),Q&&Q.d(),fe=!1,oe(be)}}}function qt(t,e,n){let{patient:l=null}=e,{isEditing:r=!1}=e,{endpoint:i}=e;const o=Oe();let f="",s="",a="",p="",d="",b="";tt(()=>{var h,k,q,D,$,W,M;r&&l&&(n(1,f=((q=(k=(h=l.name)==null?void 0:h[0])==null?void 0:k.given)==null?void 0:q[0])||""),n(2,s=(($=(D=l.name)==null?void 0:D[0])==null?void 0:$.family)||""),n(3,a=l.gender||""),n(4,p=l.birthDate||""),n(5,d=((M=(W=l.telecom)==null?void 0:W.find(w=>w.system==="phone"))==null?void 0:M.value)||""))});function _(h){const k=h.target.value,q=k.replace(/[^0-9()\-\s]/g,"");k!==q?n(6,b="Only numbers, spaces, hyphens (-), and parentheses () are allowed."):n(6,b=""),n(5,d=q)}async function N(){if(b)return;const h={resourceType:"Patient",id:r?l.id:void 0,name:[{given:[f],family:s}],gender:a,birthDate:p,telecom:[{system:"phone",value:d}],active:!0};console.log("Patient data being sent:",JSON.stringify(h,null,2));try{const k=r?`${i}/Patient/${l.id}`:`${i}/Patient`,q=r?"PUT":"POST";console.log(`Sending ${q} request to ${k}`);const D=await fetch(k,{method:q,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!D.ok){const $=await D.text();throw console.error("Server response:",$),new Error(`Failed to save patient: ${D.statusText}. Server says: ${$}`)}o("patientAdded"),o("toggleAddForm")}catch(k){console.error("Error saving patient:",k),k.message}}function g(){o("toggleAddForm")}function v(){f=this.value,n(1,f)}function I(){s=this.value,n(2,s)}function E(){a=mt(this),n(3,a)}function U(){p=this.value,n(4,p)}function Y(){d=this.value,n(5,d)}return t.$$set=h=>{"patient"in h&&n(10,l=h.patient),"isEditing"in h&&n(0,r=h.isEditing),"endpoint"in h&&n(11,i=h.endpoint)},[r,f,s,a,p,d,b,_,N,g,l,i,v,I,E,U,Y]}class wt extends qe{constructor(e){super(),Pe(this,e,qt,Pt,ye,{patient:10,isEditing:0,endpoint:11})}}function Nt(t){let e,n;const l=t[1].default,r=ut(l,t,t[0],null);return{c(){e=m("div"),r&&r.c(),c(e,"class","card svelte-jjghvv")},m(i,o){O(i,e,o),r&&r.m(e,null),n=!0},p(i,[o]){r&&r.p&&(!n||o&1)&&at(r,l,i,i[0],n?ct(l,i[0],o,null):ft(i[0]),null)},i(i){n||(F(r,i),n=!0)},o(i){G(r,i),n=!1},d(i){i&&j(e),r&&r.d(i)}}}function Et(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=i=>{"$$scope"in i&&n(0,r=i.$$scope)},[r,l]}class lt extends qe{constructor(e){super(),Pe(this,e,Et,Nt,ye,{})}}function Ge(t,e,n){const l=t.slice();return l[8]=e[n],l}function Ct(t){let e,n,l,r,i=Ee(t[0]),o=[];for(let s=0;s<i.length;s+=1)o[s]=Je(Ge(t,i,s));const f=s=>G(o[s],1,1,()=>{o[s]=null});return{c(){e=m("h2"),e.textContent="Patients:",n=y(),l=m("div");for(let s=0;s<o.length;s+=1)o[s].c();c(e,"class","svelte-17qsh60"),c(l,"class","patients svelte-17qsh60")},m(s,a){O(s,e,a),O(s,n,a),O(s,l,a);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(l,null);r=!0},p(s,a){if(a&17){i=Ee(s[0]);let p;for(p=0;p<i.length;p+=1){const d=Ge(s,i,p);o[p]?(o[p].p(d,a),F(o[p],1)):(o[p]=Je(d),o[p].c(),F(o[p],1),o[p].m(l,null))}for(ue(),p=i.length;p<o.length;p+=1)f(p);ce()}},i(s){if(!r){for(let a=0;a<i.length;a+=1)F(o[a]);r=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)G(o[a]);r=!1},d(s){s&&(j(e),j(n),j(l)),xe(o,s)}}}function St(t){let e;return{c(){e=m("h2"),e.textContent="Loading patients...",c(e,"class","loading svelte-17qsh60")},m(n,l){O(n,e,l)},p:X,i:X,o:X,d(n){n&&j(e)}}}function He(t){let e,n;return e=new lt({props:{$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){ke(e.$$.fragment)},m(l,r){he(e,l,r),n=!0},p(l,r){const i={};r&2049&&(i.$$scope={dirty:r,ctx:l}),e.$set(i)},i(l){n||(F(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function jt(t){var J,S,T,H,K,te,P,B,ne,ae;let e,n,l,r,i=((T=(S=(J=t[8])==null?void 0:J.resource)==null?void 0:S.name[0])==null?void 0:T.given[0])+"",o,f,s=((H=t[8].resource)==null?void 0:H.name[0].family)+"",a,p,d,b,_=((te=(K=t[8])==null?void 0:K.resource)==null?void 0:te.id)+"",N,g,v,I,E=((B=(P=t[8])==null?void 0:P.resource)==null?void 0:B.gender)+"",U,Y,h,k,q=((ae=(ne=t[8])==null?void 0:ne.resource)==null?void 0:ae.birthDate)+"",D,$,W,M,w,C,A;function ee(){return t[6](t[8])}return{c(){e=m("div"),n=m("div"),l=m("p"),r=L("Name: "),o=L(i),f=y(),a=L(s),p=y(),d=m("p"),b=L("id: "),N=L(_),g=y(),v=m("p"),I=L("Gender: "),U=L(E),Y=y(),h=m("p"),k=L("date of birth: "),D=L(q),$=y(),W=m("div"),M=m("button"),M.textContent="Edit",w=y(),c(n,"class","patient-info svelte-17qsh60"),c(M,"class","edit-button svelte-17qsh60"),c(W,"class","edit-button-container svelte-17qsh60"),c(e,"class","card-content svelte-17qsh60")},m(re,le){O(re,e,le),u(e,n),u(n,l),u(l,r),u(l,o),u(l,f),u(l,a),u(n,p),u(n,d),u(d,b),u(d,N),u(n,g),u(n,v),u(v,I),u(v,U),u(n,Y),u(n,h),u(h,k),u(h,D),u(e,$),u(e,W),u(W,M),O(re,w,le),C||(A=z(M,"click",ee),C=!0)},p(re,le){var se,fe,be,Q,R,Z,Le,Fe,De,Te;t=re,le&1&&i!==(i=((be=(fe=(se=t[8])==null?void 0:se.resource)==null?void 0:fe.name[0])==null?void 0:be.given[0])+"")&&x(o,i),le&1&&s!==(s=((Q=t[8].resource)==null?void 0:Q.name[0].family)+"")&&x(a,s),le&1&&_!==(_=((Z=(R=t[8])==null?void 0:R.resource)==null?void 0:Z.id)+"")&&x(N,_),le&1&&E!==(E=((Fe=(Le=t[8])==null?void 0:Le.resource)==null?void 0:Fe.gender)+"")&&x(U,E),le&1&&q!==(q=((Te=(De=t[8])==null?void 0:De.resource)==null?void 0:Te.birthDate)+"")&&x(D,q)},d(re){re&&(j(e),j(w)),C=!1,A()}}}function Je(t){var i,o,f;let e=Array.isArray(t[8].resource.name)&&((f=(o=(i=t[8])==null?void 0:i.resource)==null?void 0:o.name[0])==null?void 0:f.given)&&t[8].resource.name[0].family,n,l,r=e&&He(t);return{c(){r&&r.c(),n=Ae()},m(s,a){r&&r.m(s,a),O(s,n,a),l=!0},p(s,a){var p,d,b;a&1&&(e=Array.isArray(s[8].resource.name)&&((b=(d=(p=s[8])==null?void 0:p.resource)==null?void 0:d.name[0])==null?void 0:b.given)&&s[8].resource.name[0].family),e?r?(r.p(s,a),a&1&&F(r,1)):(r=He(s),r.c(),F(r,1),r.m(n.parentNode,n)):r&&(ue(),G(r,1,1,()=>{r=null}),ce())},i(s){l||(F(r),l=!0)},o(s){G(r),l=!1},d(s){s&&j(n),r&&r.d(s)}}}function At(t){let e,n,l,r,i,o,f,s,a,p,d;const b=[St,Ct],_=[];function N(g,v){return g[1]?0:1}return o=N(t),f=_[o]=b[o](t),{c(){e=m("div"),n=m("button"),n.textContent="Add Patient",l=y(),r=m("button"),r.textContent="Search",i=y(),f.c(),s=Ae(),c(n,"class","svelte-17qsh60"),c(r,"class","svelte-17qsh60"),c(e,"class","controls svelte-17qsh60")},m(g,v){O(g,e,v),u(e,n),u(e,l),u(e,r),O(g,i,v),_[o].m(g,v),O(g,s,v),a=!0,p||(d=[z(n,"click",t[2]),z(r,"click",t[3])],p=!0)},p(g,[v]){let I=o;o=N(g),o===I?_[o].p(g,v):(ue(),G(_[I],1,1,()=>{_[I]=null}),ce(),f=_[o],f?f.p(g,v):(f=_[o]=b[o](g),f.c()),F(f,1),f.m(s.parentNode,s))},i(g){a||(F(f),a=!0)},o(g){G(f),a=!1},d(g){g&&(j(e),j(i),j(s)),_[o].d(g),p=!1,oe(d)}}}function Ot(t,e,n){let{endpoint:l}=e;const r=Oe();let i=[],o=!0;tt(()=>{console.log("mounting..."),fetch(l+"/Patient?_sort=-_lastUpdated").then(d=>d.json()).then(d=>{console.log(d.entry),n(0,i=d.entry),n(1,o=!1)}).catch(d=>console.log(d))});function f(){r("addPatient")}function s(){r("search")}function a(d){r("editPatient",d)}const p=d=>a(d);return t.$$set=d=>{"endpoint"in d&&n(5,l=d.endpoint)},[i,o,f,s,a,l,p]}class $t extends qe{constructor(e){super(),Pe(this,e,Ot,At,ye,{endpoint:5})}}function Ve(t,e,n){const l=t.slice();return l[18]=e[n],l}function ze(t){let e,n;return{c(){e=m("p"),n=L(t[6]),c(e,"class","error-message svelte-1qxcm6d")},m(l,r){O(l,e,r),u(e,n)},p(l,r){r&64&&x(n,l[6])},d(l){l&&j(e)}}}function Ke(t){let e,n;return{c(){e=m("p"),n=L(t[5]),c(e,"class","error-message svelte-1qxcm6d")},m(l,r){O(l,e,r),u(e,n)},p(l,r){r&32&&x(n,l[5])},d(l){l&&j(e)}}}function Lt(t){let e,n,l,r;const i=[Tt,Dt],o=[];function f(s,a){return s[3].length===0?0:1}return e=f(t),n=o[e]=i[e](t),{c(){n.c(),l=Ae()},m(s,a){o[e].m(s,a),O(s,l,a),r=!0},p(s,a){let p=e;e=f(s),e===p?o[e].p(s,a):(ue(),G(o[p],1,1,()=>{o[p]=null}),ce(),n=o[e],n?n.p(s,a):(n=o[e]=i[e](s),n.c()),F(n,1),n.m(l.parentNode,l))},i(s){r||(F(n),r=!0)},o(s){G(n),r=!1},d(s){s&&j(l),o[e].d(s)}}}function Ft(t){let e;return{c(){e=m("p"),e.textContent="Searching...",c(e,"class","svelte-1qxcm6d")},m(n,l){O(n,e,l)},p:X,i:X,o:X,d(n){n&&j(e)}}}function Dt(t){let e,n,l=Ee(t[3]),r=[];for(let o=0;o<l.length;o+=1)r[o]=Qe(Ve(t,l,o));const i=o=>G(r[o],1,1,()=>{r[o]=null});return{c(){e=m("div");for(let o=0;o<r.length;o+=1)r[o].c();c(e,"class","search-results svelte-1qxcm6d")},m(o,f){O(o,e,f);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);n=!0},p(o,f){if(f&1032){l=Ee(o[3]);let s;for(s=0;s<l.length;s+=1){const a=Ve(o,l,s);r[s]?(r[s].p(a,f),F(r[s],1)):(r[s]=Qe(a),r[s].c(),F(r[s],1),r[s].m(e,null))}for(ue(),s=l.length;s<r.length;s+=1)i(s);ce()}},i(o){if(!n){for(let f=0;f<l.length;f+=1)F(r[f]);n=!0}},o(o){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)G(r[f]);n=!1},d(o){o&&j(e),xe(r,o)}}}function Tt(t){let e;return{c(){e=m("p"),e.textContent="No results found.",c(e,"class","no-results svelte-1qxcm6d")},m(n,l){O(n,e,l)},p:X,i:X,o:X,d(n){n&&j(e)}}}function Bt(t){var k,q,D,$,W,M,w;let e,n,l,r,i=(((D=(q=(k=t[18].resource.name)==null?void 0:k[0])==null?void 0:q.given)==null?void 0:D[0])||"")+"",o,f,s=(((W=($=t[18].resource.name)==null?void 0:$[0])==null?void 0:W.family)||"")+"",a,p,d,b,_=(((w=(M=t[18].resource.telecom)==null?void 0:M.find(We))==null?void 0:w.value)||"N/A")+"",N,g,v,I,E,U,Y;function h(){return t[16](t[18])}return{c(){e=m("div"),n=m("div"),l=m("p"),r=L("Name: "),o=L(i),f=y(),a=L(s),p=y(),d=m("p"),b=L("Phone: "),N=L(_),g=y(),v=m("div"),I=m("button"),I.textContent="Edit",E=y(),c(l,"class","svelte-1qxcm6d"),c(d,"class","svelte-1qxcm6d"),c(n,"class","patient-info svelte-1qxcm6d"),c(I,"class","edit-button svelte-1qxcm6d"),c(v,"class","edit-button-container svelte-1qxcm6d"),c(e,"class","card-content svelte-1qxcm6d")},m(C,A){O(C,e,A),u(e,n),u(n,l),u(l,r),u(l,o),u(l,f),u(l,a),u(n,p),u(n,d),u(d,b),u(d,N),u(e,g),u(e,v),u(v,I),O(C,E,A),U||(Y=z(I,"click",h),U=!0)},p(C,A){var ee,J,S,T,H,K,te;t=C,A&8&&i!==(i=(((S=(J=(ee=t[18].resource.name)==null?void 0:ee[0])==null?void 0:J.given)==null?void 0:S[0])||"")+"")&&x(o,i),A&8&&s!==(s=(((H=(T=t[18].resource.name)==null?void 0:T[0])==null?void 0:H.family)||"")+"")&&x(a,s),A&8&&_!==(_=(((te=(K=t[18].resource.telecom)==null?void 0:K.find(We))==null?void 0:te.value)||"N/A")+"")&&x(N,_)},d(C){C&&(j(e),j(E)),U=!1,Y()}}}function Qe(t){let e,n;return e=new lt({props:{$$slots:{default:[Bt]},$$scope:{ctx:t}}}),{c(){ke(e.$$.fragment)},m(l,r){he(e,l,r),n=!0},p(l,r){const i={};r&2097160&&(i.$$scope={dirty:r,ctx:l}),e.$set(i)},i(l){n||(F(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function It(t){let e,n,l,r,i,o,f,s,a,p,d,b,_,N,g,v,I,E,U,Y,h,k,q,D,$,W,M,w,C,A,ee,J,S=t[6]&&ze(t),T=t[5]&&Ke(t);const H=[Ft,Lt],K=[];function te(P,B){return P[4]?0:P[7]?1:-1}return~(w=te(t))&&(C=K[w]=H[w](t)),{c(){e=m("div"),n=m("h2"),n.textContent="Search Patients",l=y(),r=m("div"),i=m("div"),o=m("label"),o.textContent="First Name:",f=y(),s=m("input"),a=y(),p=m("div"),d=m("label"),d.textContent="Last Name:",b=y(),_=m("input"),N=y(),g=m("div"),v=m("label"),v.textContent="Phone Number:",I=y(),E=m("input"),U=y(),S&&S.c(),Y=y(),h=m("div"),k=m("button"),q=L("Search"),D=y(),$=m("button"),$.textContent="Back to Patient List",W=y(),T&&T.c(),M=y(),C&&C.c(),c(n,"class","svelte-1qxcm6d"),c(o,"for","firstName"),c(o,"class","svelte-1qxcm6d"),c(s,"id","firstName"),c(s,"type","text"),c(s,"placeholder","Enter first name"),c(s,"class","svelte-1qxcm6d"),c(i,"class","form-group svelte-1qxcm6d"),c(d,"for","lastName"),c(d,"class","svelte-1qxcm6d"),c(_,"id","lastName"),c(_,"type","text"),c(_,"placeholder","Enter last name"),c(_,"class","svelte-1qxcm6d"),c(p,"class","form-group svelte-1qxcm6d"),c(v,"for","phoneNumber"),c(v,"class","svelte-1qxcm6d"),c(E,"id","phoneNumber"),c(E,"type","tel"),c(E,"placeholder","Enter numbers, spaces, hyphens (-), or parentheses ()"),c(E,"class","svelte-1qxcm6d"),c(g,"class","form-group svelte-1qxcm6d"),k.disabled=t[6],c(k,"class","svelte-1qxcm6d"),c($,"class","svelte-1qxcm6d"),c(h,"class","form-actions svelte-1qxcm6d"),c(r,"class","search-form svelte-1qxcm6d"),c(e,"class","form-container svelte-1qxcm6d")},m(P,B){O(P,e,B),u(e,n),u(e,l),u(e,r),u(r,i),u(i,o),u(i,f),u(i,s),V(s,t[0]),u(r,a),u(r,p),u(p,d),u(p,b),u(p,_),V(_,t[1]),u(r,N),u(r,g),u(g,v),u(g,I),u(g,E),V(E,t[2]),u(g,U),S&&S.m(g,null),u(r,Y),u(r,h),u(h,k),u(k,q),u(h,D),u(h,$),u(e,W),T&&T.m(e,null),u(e,M),~w&&K[w].m(e,null),A=!0,ee||(J=[z(s,"input",t[13]),z(_,"input",t[14]),z(E,"input",t[15]),z(E,"input",t[8]),z(k,"click",t[9]),z($,"click",t[11])],ee=!0)},p(P,[B]){B&1&&s.value!==P[0]&&V(s,P[0]),B&2&&_.value!==P[1]&&V(_,P[1]),B&4&&V(E,P[2]),P[6]?S?S.p(P,B):(S=ze(P),S.c(),S.m(g,null)):S&&(S.d(1),S=null),(!A||B&64)&&(k.disabled=P[6]),P[5]?T?T.p(P,B):(T=Ke(P),T.c(),T.m(e,M)):T&&(T.d(1),T=null);let ne=w;w=te(P),w===ne?~w&&K[w].p(P,B):(C&&(ue(),G(K[ne],1,1,()=>{K[ne]=null}),ce()),~w?(C=K[w],C?C.p(P,B):(C=K[w]=H[w](P),C.c()),F(C,1),C.m(e,null)):C=null)},i(P){A||(F(C),A=!0)},o(P){G(C),A=!1},d(P){P&&j(e),S&&S.d(),T&&T.d(),~w&&K[w].d(),ee=!1,oe(J)}}}const We=t=>t.system==="phone";function Mt(t,e,n){let{endpoint:l}=e;const r=Oe();let i="",o="",f="",s=[],a=!1,p="",d="",b=!1;function _(h){const k=h.target.value,q=k.replace(/[^0-9()\-\s]/g,"");k!==q?n(6,d="Only numbers, spaces, hyphens (-), and parentheses () are allowed."):n(6,d=""),n(2,f=q)}async function N(){if(n(5,p=""),!i&&!o&&!f){n(5,p="Please enter at least one search criteria.");return}if(d){n(5,p="Please correct the phone number before searching.");return}n(4,a=!0),n(3,s=[]),n(7,b=!0);try{let h=new URLSearchParams;i&&h.append("given",i),o&&h.append("family",o),f&&h.append("phone",f);const k=await fetch(`${l}/Patient?${h.toString()}`);if(!k.ok)throw new Error("Failed to fetch search results");const q=await k.json();n(3,s=q.entry||[])}catch(h){console.error("Search error:",h),n(5,p="An error occurred while searching. Please try again.")}finally{n(4,a=!1)}}function g(h){r("editPatient",h)}function v(){r("back")}function I(){i=this.value,n(0,i)}function E(){o=this.value,n(1,o)}function U(){f=this.value,n(2,f)}const Y=h=>g(h);return t.$$set=h=>{"endpoint"in h&&n(12,l=h.endpoint)},[i,o,f,s,a,p,d,b,_,N,g,v,l,I,E,U,Y]}class Ut extends qe{constructor(e){super(),Pe(this,e,Mt,It,ye,{endpoint:12})}}function Rt(t){let e,n;return e=new $t({props:{endpoint:$e}}),e.$on("addPatient",t[3]),e.$on("editPatient",t[6]),e.$on("search",t[5]),{c(){ke(e.$$.fragment)},m(l,r){he(e,l,r),n=!0},p:X,i(l){n||(F(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function Gt(t){let e,n;return e=new Ut({props:{endpoint:$e}}),e.$on("editPatient",t[6]),e.$on("back",t[4]),{c(){ke(e.$$.fragment)},m(l,r){he(e,l,r),n=!0},p:X,i(l){n||(F(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){_e(e,l)}}}function Ht(t){var l;let e,n;return e=new wt({props:{patient:((l=t[2])==null?void 0:l.resource)||null,isEditing:!!t[2],endpoint:$e}}),e.$on("toggleAddForm",t[3]),e.$on("patientSaved",t[7]),{c(){ke(e.$$.fragment)},m(r,i){he(e,r,i),n=!0},p(r,i){var f;const o={};i&4&&(o.patient=((f=r[2])==null?void 0:f.resource)||null),i&4&&(o.isEditing=!!r[2]),e.$set(o)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){G(e.$$.fragment,r),n=!1},d(r){_e(e,r)}}}function Jt(t){let e,n,l,r,i,o,f,s;const a=[Ht,Gt,Rt],p=[];function d(b,_){return b[0]?0:b[1]?1:2}return r=d(t),i=p[r]=a[r](t),{c(){e=m("main"),n=m("h1"),n.textContent="Patient management application",l=y(),i.c(),o=y(),f=m("div"),f.innerHTML="<p>By Dr. Hiran DeSilva for the Medblocks bootcamp October 2024</p> <p>Thanks to Vipin and Cursor for their help and support</p> <p>This is a demo application and does not contain any real patient data.</p>",c(n,"class","text-4xl text-200 svelte-18dodbe"),c(e,"class","svelte-18dodbe"),c(f,"class","footer svelte-18dodbe")},m(b,_){O(b,e,_),u(e,n),u(e,l),p[r].m(e,null),O(b,o,_),O(b,f,_),s=!0},p(b,[_]){let N=r;r=d(b),r===N?p[r].p(b,_):(ue(),G(p[N],1,1,()=>{p[N]=null}),ce(),i=p[r],i?i.p(b,_):(i=p[r]=a[r](b),i.c()),F(i,1),i.m(e,null))},i(b){s||(F(i),s=!0)},o(b){G(i),s=!1},d(b){b&&(j(e),j(o),j(f)),p[r].d()}}}let $e="https://hapi.fhir.org/baseR4";function Vt(t,e,n){let l=!1,r=!1,i=null;function o(){n(0,l=!l),n(1,r=!1),n(2,i=null)}function f(){n(0,l=!1),n(1,r=!1),n(2,i=null)}function s(){n(1,r=!0),n(0,l=!1),n(2,i=null)}function a(){s()}function p(b){n(2,i=b.detail),n(0,l=!0),n(1,r=!1)}function d(b){console.log("Patient saved:",b.detail),fetchPatients(),n(0,l=!1),n(2,i=null)}return[l,r,i,o,f,a,p,d]}class zt extends qe{constructor(e){super(),Pe(this,e,Vt,Jt,ye,{})}}new zt({target:document.getElementById("app")});
