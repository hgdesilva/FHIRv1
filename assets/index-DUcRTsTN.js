var nt=Object.defineProperty;var lt=(t,e,n)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>lt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function Q(){}function rt(t,e){for(const n in e)t[n]=e[n];return t}function Ke(t){return t()}function Te(){return Object.create(null)}function ne(t){t.forEach(Ke)}function Qe(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function st(t,e,n,r){if(t){const l=We(t,e,n,r);return t[0](l)}}function We(t,e,n,r){return t[1]&&r?rt(n.ctx.slice(),t[1](r(e))):n.ctx}function it(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const s=[],o=Math.max(e.dirty.length,l.length);for(let p=0;p<o;p+=1)s[p]=e.dirty[p]|l[p];return s}return e.dirty|l}return e.dirty}function ut(t,e,n,r,l,s){if(l){const o=We(e,n,r,s);t.p(o,l)}}function ct(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function u(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function Xe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function O(t){return document.createTextNode(t)}function y(){return O(" ")}function Ye(){return O("")}function K(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function at(t){return function(e){return e.preventDefault(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ft(t){return Array.from(t.childNodes)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function I(t,e){t.value=e??""}function De(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function dt(t){const e=t.querySelector(":checked");return e&&e.__value}function pt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let ve;function _e(t){ve=t}function Ze(){if(!ve)throw new Error("Function called outside component initialization");return ve}function xe(t){Ze().$$.on_mount.push(t)}function Ae(){const t=Ze();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=pt(e,n,{cancelable:r});return l.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const ue=[],Re=[];let ce=[];const Be=[],ht=Promise.resolve();let $e=!1;function mt(){$e||($e=!0,ht.then(et))}function Pe(t){ce.push(t)}const Ce=new Set;let ie=0;function et(){if(ie!==0)return;const t=ve;do{try{for(;ie<ue.length;){const e=ue[ie];ie++,_e(e),_t(e.$$)}}catch(e){throw ue.length=0,ie=0,e}for(_e(null),ue.length=0,ie=0;Re.length;)Re.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];Ce.has(n)||(Ce.add(n),n())}ce.length=0}while(ue.length);for(;Be.length;)Be.pop()();$e=!1,Ce.clear(),_e(t)}function _t(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function vt(t){const e=[],n=[];ce.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ce=e}const ke=new Set;let re;function ae(){re={r:0,c:[],p:re}}function fe(){re.r||ne(re.c),re=re.p}function L(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function M(t,e,n,r){if(t&&t.o){if(ke.has(t))return;ke.add(t),re.c.push(()=>{ke.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function be(t){t&&t.c()}function de(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),Pe(()=>{const s=t.$$.on_mount.map(Ke).filter(Qe);t.$$.on_destroy?t.$$.on_destroy.push(...s):ne(s),t.$$.on_mount=[]}),l.forEach(Pe)}function pe(t,e){const n=t.$$;n.fragment!==null&&(vt(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ye(t,e,n,r,l,s,o=null,p=[-1]){const i=ve;_e(t);const a=t.$$={fragment:null,ctx:[],props:s,update:Q,not_equal:l,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Te(),dirty:p,skip_bound:!1,root:e.target||i.$$.root};o&&o(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,k,...m)=>{const C=m.length?m[0]:k;return a.ctx&&l(a.ctx[d],a.ctx[d]=C)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](C),f&&gt(t,d)),k}):[],a.update(),f=!0,ne(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=ft(e.target);a.fragment&&a.fragment.l(d),d.forEach(F)}else a.fragment&&a.fragment.c();e.intro&&L(t.$$.fragment),de(t,e.target,e.anchor),et()}_e(i)}class we{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){pe(this,1),this.$destroy=Q}$on(e,n){if(!Qe(n))return Q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bt);function yt(t){let e,n,r,l=t[0]?"Edit":"Add",s,o,p,i,a,f,d,k,m,C,g,b,S,_,w,A,P,z,$,R,B,E,N,H,G,j,q,W,T,Z,v,U,J,ee,le=t[0]?"Update":"Add",oe,he,te,X,se,me;return{c(){e=h("div"),n=h("form"),r=h("h2"),s=O(l),o=O(" Patient"),p=y(),i=h("div"),a=h("label"),a.textContent="First Name:",f=y(),d=h("input"),k=y(),m=h("div"),C=h("label"),C.textContent="Last Name:",g=y(),b=h("input"),S=y(),_=h("div"),w=h("label"),w.textContent="Gender:",A=y(),P=h("select"),z=h("option"),z.textContent="Select gender",$=h("option"),$.textContent="Male",R=h("option"),R.textContent="Female",B=h("option"),B.textContent="Other",E=y(),N=h("div"),H=h("label"),H.textContent="Date of Birth:",G=y(),j=h("input"),q=y(),W=h("div"),T=h("label"),T.textContent="Phone Number:",Z=y(),v=h("input"),U=y(),J=h("div"),ee=h("button"),oe=O(le),he=O(" Patient"),te=y(),X=h("button"),X.textContent="Cancel",c(r,"class","svelte-1dtfve8"),c(a,"for","firstName"),c(a,"class","svelte-1dtfve8"),c(d,"id","firstName"),c(d,"type","text"),d.required=!0,c(d,"class","svelte-1dtfve8"),c(i,"class","form-group svelte-1dtfve8"),c(C,"for","lastName"),c(C,"class","svelte-1dtfve8"),c(b,"id","lastName"),c(b,"type","text"),b.required=!0,c(b,"class","svelte-1dtfve8"),c(m,"class","form-group svelte-1dtfve8"),c(w,"for","gender"),c(w,"class","svelte-1dtfve8"),z.__value="",I(z,z.__value),$.__value="male",I($,$.__value),R.__value="female",I(R,R.__value),B.__value="other",I(B,B.__value),c(P,"id","gender"),P.required=!0,c(P,"class","svelte-1dtfve8"),t[3]===void 0&&Pe(()=>t[12].call(P)),c(_,"class","form-group svelte-1dtfve8"),c(H,"for","birthDate"),c(H,"class","svelte-1dtfve8"),c(j,"id","birthDate"),c(j,"type","date"),j.required=!0,c(j,"class","svelte-1dtfve8"),c(N,"class","form-group svelte-1dtfve8"),c(T,"for","phoneNumber"),c(T,"class","svelte-1dtfve8"),c(v,"id","phoneNumber"),c(v,"type","tel"),c(v,"class","svelte-1dtfve8"),c(W,"class","form-group svelte-1dtfve8"),c(ee,"type","submit"),c(ee,"class","svelte-1dtfve8"),c(X,"type","button"),c(X,"class","svelte-1dtfve8"),c(J,"class","form-actions svelte-1dtfve8"),c(n,"class","svelte-1dtfve8"),c(e,"class","form-container svelte-1dtfve8")},m(V,Y){D(V,e,Y),u(e,n),u(n,r),u(r,s),u(r,o),u(n,p),u(n,i),u(i,a),u(i,f),u(i,d),I(d,t[1]),u(n,k),u(n,m),u(m,C),u(m,g),u(m,b),I(b,t[2]),u(n,S),u(n,_),u(_,w),u(_,A),u(_,P),u(P,z),u(P,$),u(P,R),u(P,B),De(P,t[3],!0),u(n,E),u(n,N),u(N,H),u(N,G),u(N,j),I(j,t[4]),u(n,q),u(n,W),u(W,T),u(W,Z),u(W,v),I(v,t[5]),u(n,U),u(n,J),u(J,ee),u(ee,oe),u(ee,he),u(J,te),u(J,X),se||(me=[K(d,"input",t[10]),K(b,"input",t[11]),K(P,"change",t[12]),K(j,"input",t[13]),K(v,"input",t[14]),K(X,"click",t[7]),K(n,"submit",at(t[6]))],se=!0)},p(V,[Y]){Y&1&&l!==(l=V[0]?"Edit":"Add")&&x(s,l),Y&2&&d.value!==V[1]&&I(d,V[1]),Y&4&&b.value!==V[2]&&I(b,V[2]),Y&8&&De(P,V[3]),Y&16&&I(j,V[4]),Y&32&&I(v,V[5]),Y&1&&le!==(le=V[0]?"Update":"Add")&&x(oe,le)},i:Q,o:Q,d(V){V&&F(e),se=!1,ne(me)}}}function wt(t,e,n){let{patient:r=null}=e,{isEditing:l=!1}=e,{endpoint:s}=e;const o=Ae();let p="",i="",a="",f="",d="";xe(()=>{var w,A,P,z,$,R,B;l&&r&&(n(1,p=((P=(A=(w=r.name)==null?void 0:w[0])==null?void 0:A.given)==null?void 0:P[0])||""),n(2,i=(($=(z=r.name)==null?void 0:z[0])==null?void 0:$.family)||""),n(3,a=r.gender||""),n(4,f=r.birthDate||""),n(5,d=((B=(R=r.telecom)==null?void 0:R.find(E=>E.system==="phone"))==null?void 0:B.value)||""))});async function k(){const w={resourceType:"Patient",name:[{use:"official",family:i,given:[p]}],gender:a,birthDate:f,telecom:[{system:"phone",value:d}]};l&&(w.id=r.id);try{const A=l?`${s}/Patient/${r.id}`:`${s}/Patient`,z=await fetch(A,{method:l?"PUT":"POST",headers:{"Content-Type":"application/fhir+json"},body:JSON.stringify(w)});if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);const $=await z.json();console.log(`Patient ${l?"updated":"added"} successfully:`,$),o("patientAdded",$),o("toggleAddForm")}catch(A){console.error(`Error ${l?"updating":"adding"} patient:`,A)}}function m(){o("toggleAddForm")}function C(){p=this.value,n(1,p)}function g(){i=this.value,n(2,i)}function b(){a=dt(this),n(3,a)}function S(){f=this.value,n(4,f)}function _(){d=this.value,n(5,d)}return t.$$set=w=>{"patient"in w&&n(8,r=w.patient),"isEditing"in w&&n(0,l=w.isEditing),"endpoint"in w&&n(9,s=w.endpoint)},[l,p,i,a,f,d,k,m,r,s,C,g,b,S,_]}class kt extends we{constructor(e){super(),ye(this,e,wt,yt,ge,{patient:8,isEditing:0,endpoint:9})}}function Pt(t){let e,n;const r=t[1].default,l=st(r,t,t[0],null);return{c(){e=h("div"),l&&l.c(),c(e,"class","card svelte-1tqueo4")},m(s,o){D(s,e,o),l&&l.m(e,null),n=!0},p(s,[o]){l&&l.p&&(!n||o&1)&&ut(l,r,s,s[0],n?it(r,s[0],o,null):ct(s[0]),null)},i(s){n||(L(l,s),n=!0)},o(s){M(l,s),n=!1},d(s){s&&F(e),l&&l.d(s)}}}function Nt(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=s=>{"$$scope"in s&&n(0,l=s.$$scope)},[l,r]}class tt extends we{constructor(e){super(),ye(this,e,Nt,Pt,ge,{})}}function Ue(t,e,n){const r=t.slice();return r[8]=e[n],r}function Et(t){let e,n,r,l,s=Ne(t[0]),o=[];for(let i=0;i<s.length;i+=1)o[i]=Me(Ue(t,s,i));const p=i=>M(o[i],1,1,()=>{o[i]=null});return{c(){e=h("h2"),e.textContent="Patients:",n=y(),r=h("div");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","svelte-17qsh60"),c(r,"class","patients svelte-17qsh60")},m(i,a){D(i,e,a),D(i,n,a),D(i,r,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(r,null);l=!0},p(i,a){if(a&17){s=Ne(i[0]);let f;for(f=0;f<s.length;f+=1){const d=Ue(i,s,f);o[f]?(o[f].p(d,a),L(o[f],1)):(o[f]=Me(d),o[f].c(),L(o[f],1),o[f].m(r,null))}for(ae(),f=s.length;f<o.length;f+=1)p(f);fe()}},i(i){if(!l){for(let a=0;a<s.length;a+=1)L(o[a]);l=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)M(o[a]);l=!1},d(i){i&&(F(e),F(n),F(r)),Xe(o,i)}}}function Ct(t){let e;return{c(){e=h("h2"),e.textContent="Loading patients...",c(e,"class","loading svelte-17qsh60")},m(n,r){D(n,e,r)},p:Q,i:Q,o:Q,d(n){n&&F(e)}}}function Ie(t){let e,n;return e=new tt({props:{$$slots:{default:[$t]},$$scope:{ctx:t}}}),{c(){be(e.$$.fragment)},m(r,l){de(e,r,l),n=!0},p(r,l){const s={};l&2049&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){M(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function $t(t){var W,T,Z,v,U,J,ee,le,oe,he;let e,n,r,l,s=((Z=(T=(W=t[8])==null?void 0:W.resource)==null?void 0:T.name[0])==null?void 0:Z.given[0])+"",o,p,i=((v=t[8].resource)==null?void 0:v.name[0].family)+"",a,f,d,k,m=((J=(U=t[8])==null?void 0:U.resource)==null?void 0:J.id)+"",C,g,b,S,_=((le=(ee=t[8])==null?void 0:ee.resource)==null?void 0:le.gender)+"",w,A,P,z,$=((he=(oe=t[8])==null?void 0:oe.resource)==null?void 0:he.birthDate)+"",R,B,E,N,H,G,j;function q(){return t[6](t[8])}return{c(){e=h("div"),n=h("div"),r=h("p"),l=O("Name: "),o=O(s),p=y(),a=O(i),f=y(),d=h("p"),k=O("id: "),C=O(m),g=y(),b=h("p"),S=O("Gender: "),w=O(_),A=y(),P=h("p"),z=O("date of birth: "),R=O($),B=y(),E=h("div"),N=h("button"),N.textContent="Edit",H=y(),c(n,"class","patient-info svelte-17qsh60"),c(N,"class","edit-button svelte-17qsh60"),c(E,"class","edit-button-container svelte-17qsh60"),c(e,"class","card-content svelte-17qsh60")},m(te,X){D(te,e,X),u(e,n),u(n,r),u(r,l),u(r,o),u(r,p),u(r,a),u(n,f),u(n,d),u(d,k),u(d,C),u(n,g),u(n,b),u(b,S),u(b,w),u(n,A),u(n,P),u(P,z),u(P,R),u(e,B),u(e,E),u(E,N),D(te,H,X),G||(j=K(N,"click",q),G=!0)},p(te,X){var se,me,V,Y,ze,je,qe,Le,Oe,Fe;t=te,X&1&&s!==(s=((V=(me=(se=t[8])==null?void 0:se.resource)==null?void 0:me.name[0])==null?void 0:V.given[0])+"")&&x(o,s),X&1&&i!==(i=((Y=t[8].resource)==null?void 0:Y.name[0].family)+"")&&x(a,i),X&1&&m!==(m=((je=(ze=t[8])==null?void 0:ze.resource)==null?void 0:je.id)+"")&&x(C,m),X&1&&_!==(_=((Le=(qe=t[8])==null?void 0:qe.resource)==null?void 0:Le.gender)+"")&&x(w,_),X&1&&$!==($=((Fe=(Oe=t[8])==null?void 0:Oe.resource)==null?void 0:Fe.birthDate)+"")&&x(R,$)},d(te){te&&(F(e),F(H)),G=!1,j()}}}function Me(t){var s,o,p;let e=Array.isArray(t[8].resource.name)&&((p=(o=(s=t[8])==null?void 0:s.resource)==null?void 0:o.name[0])==null?void 0:p.given)&&t[8].resource.name[0].family,n,r,l=e&&Ie(t);return{c(){l&&l.c(),n=Ye()},m(i,a){l&&l.m(i,a),D(i,n,a),r=!0},p(i,a){var f,d,k;a&1&&(e=Array.isArray(i[8].resource.name)&&((k=(d=(f=i[8])==null?void 0:f.resource)==null?void 0:d.name[0])==null?void 0:k.given)&&i[8].resource.name[0].family),e?l?(l.p(i,a),a&1&&L(l,1)):(l=Ie(i),l.c(),L(l,1),l.m(n.parentNode,n)):l&&(ae(),M(l,1,1,()=>{l=null}),fe())},i(i){r||(L(l),r=!0)},o(i){M(l),r=!1},d(i){i&&F(n),l&&l.d(i)}}}function At(t){let e,n,r,l,s,o,p,i,a,f,d;const k=[Ct,Et],m=[];function C(g,b){return g[1]?0:1}return o=C(t),p=m[o]=k[o](t),{c(){e=h("div"),n=h("button"),n.textContent="Add Patient",r=y(),l=h("button"),l.textContent="Search",s=y(),p.c(),i=Ye(),c(n,"class","svelte-17qsh60"),c(l,"class","svelte-17qsh60"),c(e,"class","controls svelte-17qsh60")},m(g,b){D(g,e,b),u(e,n),u(e,r),u(e,l),D(g,s,b),m[o].m(g,b),D(g,i,b),a=!0,f||(d=[K(n,"click",t[2]),K(l,"click",t[3])],f=!0)},p(g,[b]){let S=o;o=C(g),o===S?m[o].p(g,b):(ae(),M(m[S],1,1,()=>{m[S]=null}),fe(),p=m[o],p?p.p(g,b):(p=m[o]=k[o](g),p.c()),L(p,1),p.m(i.parentNode,i))},i(g){a||(L(p),a=!0)},o(g){M(p),a=!1},d(g){g&&(F(e),F(s),F(i)),m[o].d(g),f=!1,ne(d)}}}function St(t,e,n){let{endpoint:r}=e;const l=Ae();let s=[],o=!0;xe(()=>{console.log("mounting..."),fetch(r+"/Patient?_sort=-_lastUpdated").then(d=>d.json()).then(d=>{console.log(d.entry),n(0,s=d.entry),n(1,o=!1)}).catch(d=>console.log(d))});function p(){l("addPatient")}function i(){l("search")}function a(d){l("editPatient",d)}const f=d=>a(d);return t.$$set=d=>{"endpoint"in d&&n(5,r=d.endpoint)},[s,o,p,i,a,r,f]}class zt extends we{constructor(e){super(),ye(this,e,St,At,ge,{endpoint:5})}}function He(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ge(t){let e,n;return{c(){e=h("p"),n=O(t[5]),c(e,"class","error-message svelte-1b2zv8w")},m(r,l){D(r,e,l),u(e,n)},p(r,l){l&32&&x(n,r[5])},d(r){r&&F(e)}}}function jt(t){let e;return{c(){e=h("p"),e.textContent="No results found.",c(e,"class","svelte-1b2zv8w")},m(n,r){D(n,e,r)},p:Q,i:Q,o:Q,d(n){n&&F(e)}}}function qt(t){let e,n,r=Ne(t[3]),l=[];for(let o=0;o<r.length;o+=1)l[o]=Je(He(t,r,o));const s=o=>M(l[o],1,1,()=>{l[o]=null});return{c(){e=h("div");for(let o=0;o<l.length;o+=1)l[o].c();c(e,"class","search-results svelte-1b2zv8w")},m(o,p){D(o,e,p);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(o,p){if(p&136){r=Ne(o[3]);let i;for(i=0;i<r.length;i+=1){const a=He(o,r,i);l[i]?(l[i].p(a,p),L(l[i],1)):(l[i]=Je(a),l[i].c(),L(l[i],1),l[i].m(e,null))}for(ae(),i=r.length;i<l.length;i+=1)s(i);fe()}},i(o){if(!n){for(let p=0;p<r.length;p+=1)L(l[p]);n=!0}},o(o){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)M(l[p]);n=!1},d(o){o&&F(e),Xe(l,o)}}}function Lt(t){let e;return{c(){e=h("p"),e.textContent="Searching...",c(e,"class","svelte-1b2zv8w")},m(n,r){D(n,e,r)},p:Q,i:Q,o:Q,d(n){n&&F(e)}}}function Ot(t){var z,$,R,B,E,N,H;let e,n,r,l,s=(((R=($=(z=t[15].resource.name)==null?void 0:z[0])==null?void 0:$.given)==null?void 0:R[0])||"")+"",o,p,i=(((E=(B=t[15].resource.name)==null?void 0:B[0])==null?void 0:E.family)||"")+"",a,f,d,k,m=(((H=(N=t[15].resource.telecom)==null?void 0:N.find(Ve))==null?void 0:H.value)||"N/A")+"",C,g,b,S,_,w,A;function P(){return t[13](t[15])}return{c(){e=h("div"),n=h("div"),r=h("p"),l=O("Name: "),o=O(s),p=y(),a=O(i),f=y(),d=h("p"),k=O("Phone: "),C=O(m),g=y(),b=h("div"),S=h("button"),S.textContent="Edit",_=y(),c(r,"class","svelte-1b2zv8w"),c(d,"class","svelte-1b2zv8w"),c(n,"class","patient-info svelte-1b2zv8w"),c(S,"class","edit-button svelte-1b2zv8w"),c(b,"class","edit-button-container svelte-1b2zv8w"),c(e,"class","card-content svelte-1b2zv8w")},m(G,j){D(G,e,j),u(e,n),u(n,r),u(r,l),u(r,o),u(r,p),u(r,a),u(n,f),u(n,d),u(d,k),u(d,C),u(e,g),u(e,b),u(b,S),D(G,_,j),w||(A=K(S,"click",P),w=!0)},p(G,j){var q,W,T,Z,v,U,J;t=G,j&8&&s!==(s=(((T=(W=(q=t[15].resource.name)==null?void 0:q[0])==null?void 0:W.given)==null?void 0:T[0])||"")+"")&&x(o,s),j&8&&i!==(i=(((v=(Z=t[15].resource.name)==null?void 0:Z[0])==null?void 0:v.family)||"")+"")&&x(a,i),j&8&&m!==(m=(((J=(U=t[15].resource.telecom)==null?void 0:U.find(Ve))==null?void 0:J.value)||"N/A")+"")&&x(C,m)},d(G){G&&(F(e),F(_)),w=!1,A()}}}function Je(t){let e,n;return e=new tt({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),{c(){be(e.$$.fragment)},m(r,l){de(e,r,l),n=!0},p(r,l){const s={};l&262152&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){M(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Ft(t){let e,n,r,l,s,o,p,i,a,f,d,k,m,C,g,b,S,_,w,A,P,z,$,R,B,E,N,H,G,j,q=t[5]&&Ge(t);const W=[Lt,qt,jt],T=[];function Z(v,U){return v[4]?0:v[3].length>0?1:(v[0]||v[1]||v[2])&&!v[4]?2:-1}return~(E=Z(t))&&(N=T[E]=W[E](t)),{c(){e=h("div"),n=h("h2"),n.textContent="Search Patients",r=y(),l=h("div"),s=h("div"),o=h("label"),o.textContent="First Name:",p=y(),i=h("input"),a=y(),f=h("div"),d=h("label"),d.textContent="Last Name:",k=y(),m=h("input"),C=y(),g=h("div"),b=h("label"),b.textContent="Phone Number:",S=y(),_=h("input"),w=y(),A=h("div"),P=h("button"),P.textContent="Search",z=y(),$=h("button"),$.textContent="Back to Patient List",R=y(),q&&q.c(),B=y(),N&&N.c(),c(n,"class","svelte-1b2zv8w"),c(o,"for","firstName"),c(o,"class","svelte-1b2zv8w"),c(i,"id","firstName"),c(i,"type","text"),c(i,"placeholder","Enter first name"),c(i,"class","svelte-1b2zv8w"),c(s,"class","form-group svelte-1b2zv8w"),c(d,"for","lastName"),c(d,"class","svelte-1b2zv8w"),c(m,"id","lastName"),c(m,"type","text"),c(m,"placeholder","Enter last name"),c(m,"class","svelte-1b2zv8w"),c(f,"class","form-group svelte-1b2zv8w"),c(b,"for","phoneNumber"),c(b,"class","svelte-1b2zv8w"),c(_,"id","phoneNumber"),c(_,"type","tel"),c(_,"placeholder","Enter phone number"),c(_,"class","svelte-1b2zv8w"),c(g,"class","form-group svelte-1b2zv8w"),c(P,"class","svelte-1b2zv8w"),c($,"class","svelte-1b2zv8w"),c(A,"class","form-actions svelte-1b2zv8w"),c(l,"class","search-form svelte-1b2zv8w"),c(e,"class","form-container svelte-1b2zv8w")},m(v,U){D(v,e,U),u(e,n),u(e,r),u(e,l),u(l,s),u(s,o),u(s,p),u(s,i),I(i,t[0]),u(l,a),u(l,f),u(f,d),u(f,k),u(f,m),I(m,t[1]),u(l,C),u(l,g),u(g,b),u(g,S),u(g,_),I(_,t[2]),u(l,w),u(l,A),u(A,P),u(A,z),u(A,$),u(e,R),q&&q.m(e,null),u(e,B),~E&&T[E].m(e,null),H=!0,G||(j=[K(i,"input",t[10]),K(m,"input",t[11]),K(_,"input",t[12]),K(P,"click",t[6]),K($,"click",t[8])],G=!0)},p(v,[U]){U&1&&i.value!==v[0]&&I(i,v[0]),U&2&&m.value!==v[1]&&I(m,v[1]),U&4&&I(_,v[2]),v[5]?q?q.p(v,U):(q=Ge(v),q.c(),q.m(e,B)):q&&(q.d(1),q=null);let J=E;E=Z(v),E===J?~E&&T[E].p(v,U):(N&&(ae(),M(T[J],1,1,()=>{T[J]=null}),fe()),~E?(N=T[E],N?N.p(v,U):(N=T[E]=W[E](v),N.c()),L(N,1),N.m(e,null)):N=null)},i(v){H||(L(N),H=!0)},o(v){M(N),H=!1},d(v){v&&F(e),q&&q.d(),~E&&T[E].d(),G=!1,ne(j)}}}const Ve=t=>t.system==="phone";function Tt(t,e,n){let{endpoint:r}=e;const l=Ae();let s="",o="",p="",i=[],a=!1,f="";async function d(){if(n(5,f=""),!s&&!o&&!p){n(5,f="Please enter at least one search criteria.");return}n(4,a=!0),n(3,i=[]);try{let _=new URLSearchParams;s&&_.append("given",s),o&&_.append("family",o),p&&_.append("phone",p);const w=await fetch(`${r}/Patient?${_.toString()}`);if(!w.ok)throw new Error("Failed to fetch search results");const A=await w.json();n(3,i=A.entry||[])}catch(_){console.error("Search error:",_),n(5,f="An error occurred while searching. Please try again.")}finally{n(4,a=!1)}}function k(_){l("editPatient",_)}function m(){l("back")}function C(){s=this.value,n(0,s)}function g(){o=this.value,n(1,o)}function b(){p=this.value,n(2,p)}const S=_=>k(_);return t.$$set=_=>{"endpoint"in _&&n(9,r=_.endpoint)},[s,o,p,i,a,f,d,k,m,r,C,g,b,S]}class Dt extends we{constructor(e){super(),ye(this,e,Tt,Ft,ge,{endpoint:9})}}function Rt(t){let e,n;return e=new zt({props:{endpoint:Se}}),e.$on("addPatient",t[4]),e.$on("editPatient",t[7]),e.$on("search",t[6]),{c(){be(e.$$.fragment)},m(r,l){de(e,r,l),n=!0},p:Q,i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){M(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Bt(t){let e,n;return e=new Dt({props:{endpoint:Se}}),e.$on("editPatient",t[7]),e.$on("back",t[5]),{c(){be(e.$$.fragment)},m(r,l){de(e,r,l),n=!0},p:Q,i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){M(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Ut(t){var r;let e,n;return e=new kt({props:{patient:((r=t[2])==null?void 0:r.resource)||null,isEditing:!!t[2],endpoint:Se}}),e.$on("toggleAddForm",t[4]),e.$on("patientAdded",t[3]),{c(){be(e.$$.fragment)},m(l,s){de(e,l,s),n=!0},p(l,s){var p;const o={};s&4&&(o.patient=((p=l[2])==null?void 0:p.resource)||null),s&4&&(o.isEditing=!!l[2]),e.$set(o)},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){pe(e,l)}}}function It(t){let e,n,r,l,s,o;const p=[Ut,Bt,Rt],i=[];function a(f,d){return f[0]?0:f[1]?1:2}return l=a(t),s=i[l]=p[l](t),{c(){e=h("main"),n=h("h1"),n.textContent="Patient management application",r=y(),s.c(),c(n,"class","text-4xl text-200 svelte-jrzj9j"),c(e,"class","svelte-jrzj9j")},m(f,d){D(f,e,d),u(e,n),u(e,r),i[l].m(e,null),o=!0},p(f,[d]){let k=l;l=a(f),l===k?i[l].p(f,d):(ae(),M(i[k],1,1,()=>{i[k]=null}),fe(),s=i[l],s?s.p(f,d):(s=i[l]=p[l](f),s.c()),L(s,1),s.m(e,null))},i(f){o||(L(s),o=!0)},o(f){M(s),o=!1},d(f){f&&F(e),i[l].d()}}}let Se="https://hapi.fhir.org/baseR4";const Mt="https://hapi.fhir.org/baseR4";async function Ht(t){const e={resourceType:"Patient",name:[{use:"official",given:[t.given],family:t.family}],gender:t.gender,birthDate:t.dob,telecom:[{system:"phone",value:t.phoneNumber,use:"mobile"}]};try{const n=await fetch(`${Mt}/Patient`,{method:"POST",headers:{"Content-Type":"application/fhir+json",Accept:"application/fhir+json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();return console.log("Patient added successfully:",r),r}catch(n){throw console.error("Error adding patient to server:",n),n}}function Gt(t,e,n){let r=!1,l=!0,s=!1,o=null;async function p(m){const C=m.detail;try{const g=await Ht(C);n(0,r=!1),l=!0}catch(g){console.error("Failed to add patient:",g)}}function i(){n(0,r=!r),l=!r,n(1,s=!1),n(2,o=null)}function a(){l=!0,n(0,r=!1),n(1,s=!1),n(2,o=null)}function f(){n(1,s=!0),n(0,r=!1),l=!1,n(2,o=null)}function d(){f()}function k(m){n(2,o=m.detail),n(0,r=!0),l=!1,n(1,s=!1)}return[r,s,o,p,i,a,d,k]}class Jt extends we{constructor(e){super(),ye(this,e,Gt,It,ge,{})}}new Jt({target:document.getElementById("app")});
